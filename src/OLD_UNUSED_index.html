<!DOCTYPE html>
<meta charset="utf-8">
<style>

.axis text {
  font: 12px sans-serif;
}

.axis line,
.axis path {
  fill: none;
  stroke: #444444;
  opacity: ;

  shape-rendering: crispEdges;
}

.axis--x path {
  display: none;
}

.axis--x1 path {
  display: none;
}

.tooltip {
	background: #fff;
  width: 400px;
  height: 300px;
	/* box-shadow: 0 0 5px #999999; */
  border-color: #2ebacc;
  border-width: 2px;
  border-style: solid;
	color: #333;
	font-size: 12px;
	left: 130px;
	padding: 10px;
	position: absolute;
	text-align: center;
	top: 3000px;
	z-index: 10;
	display: block;
	opacity: 0;
}

rect:hover {
			opacity: 0.5;
			}


</style>
<body>
<div><p style=
    "font-family:sans-serif;
   font-size:18px"><b> Life Cycle Analysis Tool</b> <font size="2">Facade Systems</font></div>



<form>
  <table style="width:80%">
    <tr>
      <td>
  <p>CHART TYPE:</p>
  <input type="radio" id="allImpacts" name="chart" value="allImpacts" checked="checked" onchange="updateDataOverall()">
  <label for="allImpacts">All Impacts</label><br>
  <input type="radio" id="GWP" name="chart" value="GWP" onchange="updateDataAge()">
  <label for="fGWP">Global Warming Potential</label><br>
  <input type="radio" id="LCS" name="chart" value="LCS">
  <label for="LCS">Life Cycle Stage</label><br>
  <input type="radio" id="MB" name="chart" value="MB">
  <label for="MB">Material Breakdown</label>
  </td>

  <td>

  <p>LIFESPAN:</p>
  <input type="radio" id="tenY" name="LS" value="tenY" checked="checked">
  <label for="tenY">10 Year (No Mod D.)</label><br>
  <input type="radio" id="sixty1" name="LS" value="sixty1">
  <label for="sixty1">60 Year (With Mod D)</label><br>
  <input type="radio" id="sixty2" name="LS" value="sixty2">
  <label for="sixty2">60 Year (No Mod D)</label><br><br>

</td>

<td>

  <p>BIOGENIC CARBON:</p>
  <input type="radio" id="yBio" name="BC" value="yBio" checked="checked">
  <label for="yBio">With Biogenic Carbon</label><br>
  <input type="radio" id="nBio" name="BC" value="nBio">
  <label for="nBio">No Biogenic Carbon</label><br>
  <br><br>
  <!-- <input type="submit" value="Submit"> -->

</td>
</tr>
</table>
</form>




<!--
  <div id="option"><p style=
    "margin-left: 30px;
    font-family:sans-serif;
    font-size:12px"> Select Category:
    <input name="updateButton"
           type="button"
           value="Overall"
           onclick="updateDataOverall()" />
  	<input name="updateButton"
           type="button"
           value="Sex"
           onclick="updateDataSex()" />
    <input name="updateButton"
           type="button"
           value="Birth Country"
           onclick="updateDataCountry()" />
    <input name="updateButton"
           type="button"
           value="Race"
           onclick="updateDataRace()" />
    <input name="updateButton"
           type="button"
           value="Age"
           onclick="updateDataAge()" />
    <input name="updateButton"
           type="button"
           value="Highest Education"
           onclick="updateDataDegree()" />  </p>
</div>

<label for="radio1_A">A:</label> <input type="radio" name="radio1" onchange="alert('A checked')" id="radio1_A" value="A"><br />
<label for="radio1_B">B:</label> <input type="radio" name="radio1" onchange="alert('B checked')" id="radio1_B" value="B"> -->

<!-- <p style=
   "margin-left: 120px;
    font-family:sans-serif;
    font-size:12px">
  <font color="#b1577d">Arts Attendees</font> | <font color="#5f163a"><b>Interested Non-Attendees</b></font> | <font color="#969696">Other Non-Attendees</font>
  </p> -->

<br><br>

<script src="//d3js.org/d3.v3.min.js"></script>
<script>

var tooltip = d3.select("body").append("div").attr("class", "tooltip");

var colors = d3.scale.category20c();
    		console.log(colors(0));

var factors = ["Attended","WantedToAttend", "DidNotAttend"];

//build canvas
var margin = {top: 0, right: 50, bottom: 30, left: 120},
    width = 660 - margin.left - margin.right,
    height = 900 - margin.top - margin.bottom;

//define x-axis
var x = d3.scale.linear()
            .range([0, width]);

//define y-axis
var y = d3.scale.ordinal()
            .rangeRoundBands([height, 0], .2);

//define color scale
var z = d3.scale.ordinal()
		.range(["#b1577d", "#5f163a" , "#969696"]);

//create x-axis
var xAxis1 = d3.svg.axis()

        .scale(x)
        .orient("bottom")
    		.tickValues([436])
    		.tickSize(-height)
    		.tickFormat(function(d){return " "});

  var xAxis = d3.svg.axis()

          .scale(x)
          .orient("bottom")
      		.tickValues([0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000])
      		.tickSize(-4)
      		.tickFormat(function(d){return d});


//create y-axis
var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

//define svg element
var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  	.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var mList = ["Granite", "Wood", "Limestone", "Brick", "InsMetPanel", "GFRC", "ACM", "PhenResin", "FiberCement", "Granite1", "Limestone1", "Steel", "Zinc", "Terracotta"];

    function checkGranite()
    {
      var checkbox = document.getElementById('vehicle0');
      if (checkbox.checked == true)
      {
        mList = ["Granite", "Wood", "Limestone", "Brick", "InsMetPanel", "GFRC", "ACM", "PhenResin", "FiberCement", "Granite1", "Limestone1", "Steel", "Zinc", "Terracotta"];
      }
      else{
      mList = ["Wood", "Limestone", "Brick", "InsMetPanel", "GFRC", "ACM", "PhenResin", "FiberCement", "Granite1", "Limestone1", "Steel", "Zinc", "Terracotta"];
      }
      updateDataOverall();
    }

    function checkWood()
    {
      var checkbox = document.getElementById('vehicle9');
      if (checkbox.checked == true)
      {
        mList = ["Granite", "Wood", "Limestone", "Brick", "InsMetPanel", "GFRC", "ACM", "PhenResin", "FiberCement", "Granite1", "Limestone1", "Steel", "Zinc", "Terracotta"];
      }
      else{
      mList = ["Wood", "Granite1", "Limestone1", "Steel", "Zinc", "Terracotta"];
      }
      updateDataOverall();
    }

    function checkSteel()
    {
      var checkbox = document.getElementById('vehicle8');
      if (checkbox.checked == true)
      {
        mList = ["Granite", "Wood", "Limestone", "Brick", "InsMetPanel", "GFRC", "ACM", "PhenResin", "FiberCement", "Granite1", "Limestone1", "Steel", "Zinc", "Terracotta"];
      }
      else{
      mList = ["Wood", "Steel"];
      }
      updateDataOverall();
    }







var data = [];
//read data and transform it
d3.csv("dataoverallLCA.csv", type, function(error, data1) {
  if (error) throw error;
  data1.forEach(function(d) {
    // console.log(data1);
        if(mList.includes(d.Variable)){
          data.push(d);
        }
        // console.log(data);

    });
	// console.log(data);
  var layers = d3.layout.stack()(factors.map(function(c) {
    return data.map(function(d) {
      return {x: d.Variable, y: d[c]};
    });
  }));

//scale axes
  y.domain(layers[0].map(function(d) { return d.x; }));
 // x.domain([0, d3.max(layers[layers.length - 1], function(d) { return d.y0 + d.y; })]).nice();
  x.domain([0, 1000]).nice();



//building bars
  svg.append("g")
      .attr("class", "axis axis--x")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);
      // .call(xAxis1);

      svg.append("g")
          .attr("class", "axis axis--x1")
          .attr("transform", "translate(0," + height + ")")
          .call(xAxis1);

      var tooltip = d3.select("body").append("div").attr("class", "tooltip");


        tooltip.append('div')
        .attr('class', 'label');
        tooltip.append('div')
        .attr('class', 'value');
        tooltip.append('div')
        .attr('class', 'value1');
        tooltip.append('div')
        .attr('class', 'value2');


  var layer = svg.selectAll(".layers")
      .data(layers)
    	.enter().append("g")
      .attr("class", "layer");


  layer.selectAll("rect")
      .data(function(d) { return d; })
    	.enter().append("rect")
      .attr("y", function(d) { return y(d.x); })
      .attr("x", function(d) {return x(d.y0); })
      .attr("width", function(d) {return x(d.y); })
      .attr("height", y.rangeBand())
      // .style("fill", function(d, i) { return z(i); });
      .style("fill" , function(d){
        // console.log(d.x);
						if (d.x === "Granite") {
							return "#f99f2d";
						}
						else if (d.x === "Limestone") {
							return "#febd2a";
						}
						else if (d.x === "Brick") {
							return "#ffd743";
						}
						else if (d.x === "InsMetPanel") {
							return "#ea5625";
						}
						else if (d.x === "GFRC") {
							return "#700000";
						}
            else if (d.x === "ACM") {
							return "#920000";
						}
            else if (d.x === "Terracotta") {
							return "#b00000";
						}
            else if (d.x === "PhenResin") {
							return "#c80000";
						}
            else if (d.x === "FiberCement") {
							return "#e20000";
						}
            else if (d.x === "Zinc") {
							return "#ff1515";
						}
            else if (d.x === "Granite1") {
							return "#ff1515";
						}
						else if (d.x === "Limestone1") {
							return "#ff6161";
						}
            else if (d.x === "Steel") {
							return "#ff8989";
						}
            else if (d.x === "Wood") {
							return "#ffb7b7";
						}

					})

        .on('mouseover', function(d) {
            tooltip.select('.label').html('<p style="font-family:sans-serif; font-size:18px; align: left"><b>' + d.x + "</b>");
            tooltip.select('.value').html("<b> Value: " + d.y + "</b>");
            tooltip.select('.value1').html('<font size="2">Facade Systems</font>');
            tooltip.select('.value2').html('<img src="LCA.jpg" alt="Smiley face" height="220" width="350">');

            tooltip.style('display', 'block');
            tooltip.style('opacity',2);
            // d3.select(this).attr("fill", "#45B29D");
        })
        .on('mousemove', function(d) {

            tooltip.style('top', (d3.event.layerY + 0) + 'px')
            .style('left', (d3.event.layerX + 15) + 'px');
        })
        .on('mouseout', function(d) {
            tooltip.style('display', 'none');
            tooltip.style('opacity',0);
        });


  // layer.selectAll("text")
  //     .data(function(d) { return d; })
  //   	.enter().append("text")
  //     .attr("y", function(d) {return y(d.x)+115; })
  //     .attr("x", function(d) {return x(d.y0)+25; })
  //   	.attr("text-anchor","middle")
  //   	.style("font-size", "14px")
  //   	.style("fill", "#fff")
  //  		.style("font-family", "Sans-serif")
  // 		.text(function(d) { return d3.select(d.y)+ "%"})

  svg.append("g")
 	    .attr("class", "axis axis--y")
      .attr("transform", "translate(" + 0 + ",0)")
      .call(yAxis);

});

function type(d) {
  factors.forEach(function(c) { d[c] = +d[c]; });
  return d;

};




function updateDataOverall() {

  var data = [];
  var data1 = [];
  console.log(mList);

//remove existing selection
svg.selectAll("*").remove();

//bring in new data
d3.csv("dataoverallLCA.csv", type, function(error, data1) {
  if (error) throw error;
  data1.forEach(function(d) {
    console.log(data1);
        if(mList.includes(d.Variable)){
          data.push(d);
        }
        // console.log(data);

    });
	// console.log(data);
  var layers = d3.layout.stack()(factors.map(function(c) {
    return data.map(function(d) {
      return {x: d.Variable, y: d[c]};
    });
  }));

//scale axes
  y.domain(layers[0].map(function(d) { return d.x; }));
 // x.domain([0, d3.max(layers[layers.length - 1], function(d) { return d.y0 + d.y; })]).nice();
  x.domain([0, 1000]).nice();



//building bars
  svg.append("g")
      .attr("class", "axis axis--x")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);
      // .call(xAxis1);

      svg.append("g")
          .attr("class", "axis axis--x1")
          .attr("transform", "translate(0," + height + ")")
          .call(xAxis1);

      var tooltip = d3.select("body").append("div").attr("class", "tooltip");


        tooltip.append('div')
        .attr('class', 'label');
        tooltip.append('div')
        .attr('class', 'value');
        tooltip.append('div')
        .attr('class', 'value1');
        tooltip.append('div')
        .attr('class', 'value2');


  var layer = svg.selectAll(".layers")
      .data(layers)
    	.enter().append("g")
      .attr("class", "layer");


  layer.selectAll("rect")
      .data(function(d) { return d; })
    	.enter().append("rect")
      .attr("y", function(d) { return y(d.x); })
      .attr("x", function(d) {return x(d.y0); })
      .attr("width", function(d) {return x(d.y); })
      .attr("height", y.rangeBand())
      // .style("fill", function(d, i) { return z(i); });
      .style("fill" , function(d){
        // console.log(d.x);
						if (d.x === "Granite") {
							return "#f99f2d";
						}
						else if (d.x === "Limestone") {
							return "#febd2a";
						}
						else if (d.x === "Brick") {
							return "#ffd743";
						}
						else if (d.x === "InsMetPanel") {
							return "#ea5625";
						}
						else if (d.x === "GFRC") {
							return "#700000";
						}
            else if (d.x === "ACM") {
							return "#920000";
						}
            else if (d.x === "Terracotta") {
							return "#b00000";
						}
            else if (d.x === "PhenResin") {
							return "#c80000";
						}
            else if (d.x === "FiberCement") {
							return "#e20000";
						}
            else if (d.x === "Zinc") {
							return "#ff1515";
						}
            else if (d.x === "Granite1") {
							return "#ff1515";
						}
						else if (d.x === "Limestone1") {
							return "#ff6161";
						}
            else if (d.x === "Steel") {
							return "#ff8989";
						}
            else if (d.x === "Wood") {
							return "#ffb7b7";
						}

					})

        .on('mouseover', function(d) {
            tooltip.select('.label').html('<p style="font-family:sans-serif; font-size:18px; align: left"><b>' + d.x + "</b>");
            tooltip.select('.value').html("<b> Value: " + d.y + "</b>");
            tooltip.select('.value1').html('<font size="2">Facade Systems</font>');
            tooltip.select('.value2').html('<img src="LCA.jpg" alt="Smiley face" height="220" width="350">');

            tooltip.style('display', 'block');
            tooltip.style('opacity',2);
            // d3.select(this).attr("fill", "#45B29D");
        })
        .on('mousemove', function(d) {

            tooltip.style('top', (d3.event.layerY + 0) + 'px')
            .style('left', (d3.event.layerX + 15) + 'px');
        })
        .on('mouseout', function(d) {
            tooltip.style('display', 'none');
            tooltip.style('opacity',0);
        });


  // layer.selectAll("text")
  //     .data(function(d) { return d; })
  //   	.enter().append("text")
  //     .attr("y", function(d) {return y(d.x)+115; })
  //     .attr("x", function(d) {return x(d.y0)+25; })
  //   	.attr("text-anchor","middle")
  //   	.style("font-size", "14px")
  //   	.style("fill", "#fff")
  //  		.style("font-family", "Sans-serif")
  // 		.text(function(d) { return d3.select(d.y)+ "%"})

  svg.append("g")
 	    .attr("class", "axis axis--y")
      .attr("transform", "translate(" + 0 + ",0)")
      .call(yAxis);

});

function type(d) {
  factors.forEach(function(c) { d[c] = +d[c]; });
  return d;

};

function type(d) {
  factors.forEach(function(c) { d[c] = +d[c]; });
  return d;
};

}

function updateDataSex() {

//remove existing selection
svg.selectAll("*").remove();

//bring in new data
d3.csv("datasex.csv", type, function(error, data) {
  if (error) throw error;
	console.log(data)
  var layers = d3.layout.stack()(factors.map(function(c) {
    return data.map(function(d) {
      return {x: d.Variable, y: d[c]};
    });
  }));

//scale axes
  y.domain(layers[0].map(function(d) { return d.x; }));
 // x.domain([0, d3.max(layers[layers.length - 1], function(d) { return d.y0 + d.y; })]).nice();
  x.domain([0, 100]).nice();

//building bars
  svg.append("g")
      .attr("class", "axis axis--x")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  var layer = svg.selectAll(".layers")
      .data(layers)
    	.enter().append("g")
      .attr("class", "layer")
      .style("fill", function(d, i) { return z(i); });

  layer.selectAll("rect")
      .data(function(d) { return d; })
    	.enter().append("rect")
      .attr("y", function(d) { return y(d.x); })
      .attr("x", function(d) {return x(d.y0); })
      .attr("width", function(d) {return x(d.y); })
      .attr("height", y.rangeBand());

  layer.selectAll("text")
      .data(function(d) { return d; })
    	.enter().append("text")
      .attr("y", function(d) {return y(d.x)+62; })
      .attr("x", function(d) {return x(d.y0)+25; })
    	.attr("text-anchor","middle")
    	.style("font-size", "14px")
    	.style("fill", "#fff")
   		.style("font-family", "Sans-serif")
  		.text(function(d) { return d3.select(d.y)+ "%"})

  svg.append("g")
 	    .attr("class", "axis axis--y")
      .attr("transform", "translate(" + 0 + ",0)")
      .call(yAxis);
});

function type(d) {
  factors.forEach(function(c) { d[c] = +d[c]; });
  return d;
};

}

function updateDataCountry() {

//remove existing selection
svg.selectAll("*").remove();

//bring in new data
d3.csv("databirthcountry.csv", type, function(error, data) {
  if (error) throw error;
	console.log(data)
  var layers = d3.layout.stack()(factors.map(function(c) {
    return data.map(function(d) {
      return {x: d.Variable, y: d[c]};
    });
  }));

//scale axes
  y.domain(layers[0].map(function(d) { return d.x; }));
 // x.domain([0, d3.max(layers[layers.length - 1], function(d) { return d.y0 + d.y; })]).nice();
  x.domain([0, 100]).nice();

//building bars

  svg.append("g")
      .attr("class", "axis axis--x")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  var layer = svg.selectAll(".layers")
      .data(layers)
    	.enter().append("g")
      .attr("class", "layer")
      .style("fill", function(d, i) { return z(i); });

  layer.selectAll("rect")
      .data(function(d) { return d; })
    	.enter().append("rect")
      .attr("y", function(d) { return y(d.x); })
      .attr("x", function(d) {return x(d.y0); })
      .attr("width", function(d) {return x(d.y); })
      .attr("height", y.rangeBand());

  layer.selectAll("text")
      .data(function(d) { return d; })
    	.enter().append("text")
      .attr("y", function(d) {return y(d.x)+62; })
      .attr("x", function(d) {return x(d.y0)+25; })
    	.attr("text-anchor","middle")
    	.style("font-size", "14px")
    	.style("fill", "#fff")
   		.style("font-family", "Sans-serif")
  		.text(function(d) { return d3.select(d.y)+ "%"})

  svg.append("g")
 	    .attr("class", "axis axis--y")
      .attr("transform", "translate(" + 0 + ",0)")
      .call(yAxis);

});

function type(d) {
  factors.forEach(function(c) { d[c] = +d[c]; });
  return d;
};

}

function updateDataRace() {

//remove existing selection
svg.selectAll("*").remove();

//bring in new data
d3.csv("datarace.csv", type, function(error, data) {
  if (error) throw error;
	console.log(data)
  var layers = d3.layout.stack()(factors.map(function(c) {
    return data.map(function(d) {
      return {x: d.Variable, y: d[c]};
    });
  }));

//scale axes
  y.domain(layers[0].map(function(d) { return d.x; }));
 // x.domain([0, d3.max(layers[layers.length - 1], function(d) { return d.y0 + d.y; })]).nice();
  x.domain([0, 100]).nice();

//building bars
  svg.append("g")
      .attr("class", "axis axis--x")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  var layer = svg.selectAll(".layers")
      .data(layers)
    	.enter().append("g")
      .attr("class", "layer")
      .style("fill", function(d, i) { return z(i); });

  layer.selectAll("rect")
      .data(function(d) { return d; })
    	.enter().append("rect")
      .attr("y", function(d) { return y(d.x); })
      .attr("x", function(d) {return x(d.y0); })
      .attr("width", function(d) {return x(d.y); })
      .attr("height", y.rangeBand());

  layer.selectAll("text")
      .data(function(d) { return d; })
    	.enter().append("text")
      .attr("y", function(d) {return y(d.x)+45; })
      .attr("x", function(d) {return x(d.y0)+25; })
    	.attr("text-anchor","middle")
    	.style("font-size", "14px")
    	.style("fill", "#fff")
   		.style("font-family", "Sans-serif")
  		.text(function(d) { return d3.select(d.y)+ "%"})

  svg.append("g")
 	    .attr("class", "axis axis--y")
      .attr("transform", "translate(" + 0 + ",0)")
      .call(yAxis);
});

function type(d) {
  factors.forEach(function(c) { d[c] = +d[c]; });
  return d;
};

}

function updateDataAge() {

  var data = [];
  var data1 = [];
  console.log(mList);

  //remove existing selection
  svg.selectAll("*").remove();

  //bring in new data
  d3.csv("dataageLCA.csv", type, function(error, data1) {
  if (error) throw error;
  data1.forEach(function(d) {
    console.log(data1);
        if(mList.includes(d.Variable)){
          data.push(d);
        }
        // console.log(data);

    });
  // console.log(data);
  var layers = d3.layout.stack()(factors.map(function(c) {
    return data.map(function(d) {
      return {x: d.Variable, y: d[c]};
    });
  }));

  //scale axes
  y.domain(layers[0].map(function(d) { return d.x; }));
  // x.domain([0, d3.max(layers[layers.length - 1], function(d) { return d.y0 + d.y; })]).nice();
  x.domain([0, 1000]).nice();



  //building bars
  svg.append("g")
      .attr("class", "axis axis--x")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);
      // .call(xAxis1);

      svg.append("g")
          .attr("class", "axis axis--x1")
          .attr("transform", "translate(0," + height + ")")
          .call(xAxis1);

      var tooltip = d3.select("body").append("div").attr("class", "tooltip");


        tooltip.append('div')
        .attr('class', 'label');
        tooltip.append('div')
        .attr('class', 'value');
        tooltip.append('div')
        .attr('class', 'value1');
        tooltip.append('div')
        .attr('class', 'value2');


  var layer = svg.selectAll(".layers")
      .data(layers)
      .enter().append("g")
      .attr("class", "layer");


  layer.selectAll("rect")
      .data(function(d) { return d; })
      .enter().append("rect")
      .attr("y", function(d) { return y(d.x); })
      .attr("x", function(d) {return x(d.y0); })
      .attr("width", function(d) {return x(d.y); })
      .attr("height", y.rangeBand())
      // .style("fill", function(d, i) { return z(i); });
      .style("fill" , function(d){
        // console.log(d.x);
            if (d.x === "Granite") {
              return "#f99f2d";
            }
            else if (d.x === "Limestone") {
              return "#febd2a";
            }
            else if (d.x === "Brick") {
              return "#ffd743";
            }
            else if (d.x === "InsMetPanel") {
              return "#ea5625";
            }
            else if (d.x === "GFRC") {
              return "#700000";
            }
            else if (d.x === "ACM") {
              return "#920000";
            }
            else if (d.x === "Terracotta") {
              return "#b00000";
            }
            else if (d.x === "PhenResin") {
              return "#c80000";
            }
            else if (d.x === "FiberCement") {
              return "#e20000";
            }
            else if (d.x === "Zinc") {
              return "#ff1515";
            }
            else if (d.x === "Granite1") {
              return "#ff1515";
            }
            else if (d.x === "Limestone1") {
              return "#ff6161";
            }
            else if (d.x === "Steel") {
              return "#ff8989";
            }
            else if (d.x === "Wood") {
              return "#ffb7b7";
            }

          })

        .on('mouseover', function(d) {
            tooltip.select('.label').html('<p style="font-family:sans-serif; font-size:18px; align: left"><b>' + d.x + "</b>");
            tooltip.select('.value').html("<b> Value: " + d.y + "</b>");
            tooltip.select('.value1').html('<font size="2">Facade Systems</font>');
            tooltip.select('.value2').html('<img src="LCA.jpg" alt="Smiley face" height="220" width="350">');

            tooltip.style('display', 'block');
            tooltip.style('opacity',2);
            // d3.select(this).attr("fill", "#45B29D");
        })
        .on('mousemove', function(d) {

            tooltip.style('top', (d3.event.layerY + 0) + 'px')
            .style('left', (d3.event.layerX + 15) + 'px');
        })
        .on('mouseout', function(d) {
            tooltip.style('display', 'none');
            tooltip.style('opacity',0);
        });


  // layer.selectAll("text")
  //     .data(function(d) { return d; })
  //   	.enter().append("text")
  //     .attr("y", function(d) {return y(d.x)+115; })
  //     .attr("x", function(d) {return x(d.y0)+25; })
  //   	.attr("text-anchor","middle")
  //   	.style("font-size", "14px")
  //   	.style("fill", "#fff")
  //  		.style("font-family", "Sans-serif")
  // 		.text(function(d) { return d3.select(d.y)+ "%"})

  svg.append("g")
      .attr("class", "axis axis--y")
      .attr("transform", "translate(" + 0 + ",0)")
      .call(yAxis);

  });

  function type(d) {
  factors.forEach(function(c) { d[c] = +d[c]; });
  return d;

  };

  function type(d) {
  factors.forEach(function(c) { d[c] = +d[c]; });
  return d;
  };

  }

function updateDataDegree() {

//remove existing selection
svg.selectAll("*").remove();

//bring in new data
d3.csv("dataeducation.csv", type, function(error, data) {
  if (error) throw error;
	console.log(data)
  var layers = d3.layout.stack()(factors.map(function(c) {
    return data.map(function(d) {
      return {x: d.Variable, y: d[c]};
    });
  }));

//scale axes
  y.domain(layers[0].map(function(d) { return d.x; }));
 // x.domain([0, d3.max(layers[layers.length - 1], function(d) { return d.y0 + d.y; })]).nice();
  x.domain([0, 100]).nice();

//building bars
  svg.append("g")
      .attr("class", "axis axis--x")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  var layer = svg.selectAll(".layers")
      .data(layers)
    	.enter().append("g")
      .attr("class", "layer")
      .style("fill", function(d, i) { return z(i); });

  layer.selectAll("rect")
      .data(function(d) { return d; })
    	.enter().append("rect")
      .attr("y", function(d) { return y(d.x); })
      .attr("x", function(d) {return x(d.y0); })
      .attr("width", function(d) {return x(d.y); })
      .attr("height", y.rangeBand());

  layer.selectAll("text")
      .data(function(d) { return d; })
    	.enter().append("text")
      .attr("y", function(d) {return y(d.x)+27; })
      .attr("x", function(d) {return x(d.y0)+25; })
    	.attr("text-anchor","middle")
    	.style("font-size", "14px")
    	.style("fill", "#fff")
   		.style("font-family", "Sans-serif")
  		.text(function(d) { return d3.select(d.y)+ "%"})

  svg.append("g")
 	    .attr("class", "axis axis--y")
      .attr("transform", "translate(" + 0 + ",0)")
      .call(yAxis);
});

function type(d) {
  factors.forEach(function(c) { d[c] = +d[c]; });
  return d;
};

}



</script>
<form>
  <table style="width:80%">
    <tr>
      <td>
  <input type="checkbox" name="vehicle0" value="Bike" id='vehicle0' onclick="checkGranite()" checked>
  <label for="vehicle0"> Granite</label><br>
  <input type="checkbox" name="vehicle2" value="Car" checked>
  <label for="vehicle2"> Limestone</label><br>
  <input type="checkbox" name="vehicle3" value="Boat" checked>
  <label for="vehicle3"> Brick</label><br>
  <input type="checkbox" name="vehicle2" value="Car" checked>
  <label for="vehicle2"> InsMetPanel</label><br>
  <input type="checkbox" name="vehicle3" value="Boat" checked>
  <label for="vehicle3"> GFRC</label><br>

</td>
<td>
<input type="checkbox" name="vehicle1" value="Bike" checked>
<label for="vehicle1"> ACM</label><br>
<input type="checkbox" name="vehicle2" value="Car" checked>
<label for="vehicle2"> Terracotta</label><br>
<input type="checkbox" name="vehicle3" value="Boat" checked>
<label for="vehicle3"> PhenResin</label><br>
<input type="checkbox" name="vehicle2" value="Car" checked>
<label for="vehicle2"> FiberCement</label><br>
<input type="checkbox" name="vehicle3" value="Boat" checked>
<label for="vehicle3"> I have a boat</label><br>

</td>
<td>
<input type="checkbox" name="vehicle1" value="Bike" checked>
<label for="vehicle1"> Zinc</label><br>
<input type="checkbox" name="vehicle2" value="Car" checked>
<label for="vehicle2"> Granite1</label><br>
<input type="checkbox" name="vehicle3" value="Boat" checked>
<label for="vehicle3"> Limestone1</label><br>
<input type="checkbox" name="vehicle8" value="Car" id='vehicle8' checked onclick="checkSteel()">
<label for="vehicle2"> Steel</label><br>
<input type="checkbox" name="vehicle9" value="Boat" id='vehicle9' checked onclick="checkWood()">
<label for="vehicle3"> Wood</label><br>
</td>
</tr>
</table>
</form>
</body>
</html>
